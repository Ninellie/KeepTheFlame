# Соглашения о стиле кода

### 1. Именование

**Классы, интерфейсы, структуры:**
- PascalCase
- Интерфейсы начинаются с префикса `I`
- Классы конфигураций заканчиваются на `Config`

**Публичные свойства и поля:**
- PascalCase
- Публичные поля допустимы только в ScriptableObject конфигурациях

**Приватные поля:**
- Начинаются с подчеркивания `_`, затем camelCase
- `readonly` поля следуют тому же правилу

**Методы:**
- PascalCase для всех методов
- Методы инициализации могут называться `Init()`

**Публичные события:**
- PascalCase с префиксом `On`

**Локальные переменные и параметры методов:**
- camelCase
- Всегда используйте `var` для локальных переменных, когда тип очевиден из правой части присваивания
- Допускается использование классических математических обозначений

**Константы:**
- PascalCase для публичных констант
- camelCase с префиксом `_` для приватных констант (если используются)

**Именование должно быть:**
- Понятным и самодокументируемым
- Коротким и содержательным
- На английском языке
- Без сокращений, если они не являются общепринятыми

### 2. Структура классов и файлов

**Порядок объявления членов класса:**

**Переменные (от более публичных к менее публичным):**

1. Константы
2. Публичные поля
3. Публичные свойства с атрибутом `[SerializeField]`
4. Приватные поля с атрибутом `[SerializeField]`
5. Публичные свойства
7. Публичные события
8. Приватные свойства
9. Приватные `readonly` поля
10. Обычные приватные поля

Наличие атрибутов `[SerializeField]` и `[ReadOnly]` (TriInspector) одновременно никак не влияет на порядок размещения и считается, будто у поля или свойства нет этих атрибутов.

**Важно:** Публичных полей быть не должно, за исключением ScriptableObject файлов конфигураций.

11. Конструкторы
12. Реализация интерфейсов VContainer (IStartable, ITickable, IFixedTickable, IDisposable) или Unity lifecycle методы (Awake, Start, OnEnable, Update/FixedUpdate, OnDisable, OnDestroy)
13. Публичные методы
14. Приватные методы

**Логика порядка:**

**Для переменных:** Принцип "чем выше — тем публичнее". `[SerializeField]` делает поле доступным для редактирования в инспекторе Unity — это публичность по отношению к человеку-редактору, что важнее публичности для других классов. Поэтому SerializeField поля идут выше обычных публичных свойств.

**Для методов:** Принцип "от общего к частному". При открытии класса нужно видеть логику работы. Логика начинается с точек входа (Unity lifecycle методы или интерфейсы VContainer), затем публичные методы (API класса), и в конце — приватные методы (детали реализации). Unity lifecycle методы размещаются строго в порядке вызова: Awake → Start → OnEnable → Update/FixedUpdate → OnDisable → OnDestroy.

### 3. Форматирование кода

**Отступы:**
- Используйте 4 пробела для отступов (не табы)
- Каждый уровень вложенности увеличивает отступ на 4 пробела

**Using директивы:**
- По одной директиве на строку
- Порядок: сначала кастомные namespace проекта, затем `UnityEngine`, затем `UnityEngine.*`, затем внешние библиотеки (VContainer, DG.Tweening и т.д.)
- Пустая строка после всех using директив, перед объявлением namespace

**Фигурные скобки:**
- Открывающая фигурная скобка `{` на той же строке, что и объявление
- Закрывающая фигурная скобка `}` на отдельной строке на том же уровне отступа, что и соответствующее открывающее объявление
- Пустая строка перед закрывающей скобкой только если блок кода пустой

**Пробелы:**
- Пробелы вокруг бинарных операторов (`=`, `+`, `-`, `==`, `!=`, `&&`, `||` и т.д.)
- Пробелы после запятых в списках параметров и аргументов
- Пробелы после ключевых слов (`if`, `for`, `foreach`, `while`, `return` и т.д.)
- Пробелы внутри скобок не используются: `if (condition)` а не `if ( condition )`
- Пробелы вокруг унарных операторов не используются: `!condition` а не `! condition`

**Переносы строк:**
- Длинные строки должны переноситься на новую строку с отступом
- Параметры методов переносятся на новую строку с отступом, если строка слишком длинная
- Цепочки вызовов методов переносятся на новую строку с отступом
- Избегайте длинных строк — если строка выходит за разумные пределы, перенесите её

**Пустые строки:**
- Пустая строка между методами, свойствами, событиями
- Пустая строка внутри методов для разделения логических блоков
- Пустая строка после группы объявлений полей/свойств перед методами
- Не используйте более одной пустой строки подряд

**Точка с запятой:**
- Всегда в конце операторов (даже если это необязательно)

### 4. Комментарии и документация

**Общие принципы:**

- Избегайте избыточных комментариев, которые дублируют очевидный код
- Код должен быть самодокументируемым — комментарии объясняют "почему", а не "что"
- Обновляйте комментарии при изменении кода
- Используйте XML-документацию (`///`) для публичных API
- Используйте однострочные комментарии (`//`) для группировки логических блоков и пояснения неочевидных моментов
